<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotellbokning</title>
</head>
<body>
    <select id="room"></select>

    <select id="guest">
        <option value="2">Jane</option>
        <option value="3">John</option>
    </select>

    Bokning startdatum: <input id="datefrom" type="date">

    <input id="btnBook" type="button" value="Boka">

    <script>
    const API_URL = "https://vm2208.kaj.pouta.csc.fi:8300"

    async function getRooms() {
        const resp = await fetch(`${API_URL}/rooms`);
        const rooms = await resp.json();

        let roomsHtml = "<option>-- VÃ¤lj rum</option>";
        for (room of rooms) {
            roomsHtml += `
                <option value="${room.id}">
                    ${room.room_number}
                </option>
            `;
        }
        document.querySelector('#room').innerHTML = roomsHtml;
    }
    getRooms();

    async function createBooking() {
        // Detta ska POST:as till /bookings
        const booking = {
            room: document.querySelector('#guest').value,
            guest: document.querySelector('#room').value,
            datefrom: document.querySelector('#datefrom').value
        }
        console.log(booking);
        const resp = await fetch(`${API_URL}/bookings`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(booking)
        })
        const respData = await resp.json();

        console.log(respData);
    }


    document.querySelector('#btnBook').addEventListener('click', createBooking);

    </script>

</body>
</html>